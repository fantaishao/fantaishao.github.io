---
layout: post
#标题配置
title:  网络地址&广播地址&子网掩码&网段&IP地址
#时间配置
date:   2020-04-11
#大类配置
categories: ComputerNet
#小类配置
tag: 计算机网络原理
---

为了搞懂IP地址是什么，把《计算机网络自顶向下》翻出来，看了IPv4编址这节，依旧说不出来，好吧，尝试总结下。

#### IP地址

IP地址是一个数据报文段，每个IP地址长度为32比特，IP地址在全球具有唯一性。

IPv4数据报格式

<table>
	<tr>
	    <th>版本(4位)</th>
	    <th>首部长度版本(4位)</th>
	    <th>服务类型版本(8位)</th>
      <th colspan="2">数据报长度(16位)</th>
	</tr >
	<tr >
	    <td align="center" colspan="3">标识(16位)</td>
	    <td align="center">标志(3位)</td>
	    <td align="center">片偏移(13位)</td>
	</tr>
	<tr>
	    <td align="center" colspan="2">寿命(8位)</td>
	    <td align="center">上层协议(8位)</td>
    <td align="center" colspan="2">首部检验和(16位)</td>
	</tr>
  <tr>
	    <td align="center" colspan="5">源IP地址(32位)</td>
	</tr>
<tr>
	    <td align="center" colspan="5">目的IP地址(32位)</td>
	</tr>
  <tr>
	    <td align="center" colspan="5">选项(如果有的话)(可选，长度可变)</td>
	</tr>
  <tr>
	    <td align="center" colspan="5">数据</td>
	</tr>
</table>
![big]({{ '/styles/images/interface-addresses-and-subnets.png' | prepend: site.baseurl  }})

> 如图，用IP的术语来说，互联这3个主机接口与1个路由器接口的网路形成一个子网(subnet)。(在因特网文献中，子网也称为IP网络或直接称为网络。)IP编址为这个子网分配一个地址: 233.1.1.0/24, 其中/24记法，有时称为子网掩码(network-mask),指示了32比特中的最左侧24比特定义了子网地址。因此233.1.1.0/24是由3台主机接口(233.1.1.1,233.1.1.2,233.1.1.3)和1个路由器接口(233.1.1.4)组成。任何其他要连到233.1.1.0/24网络的主机都要求其他地址具有233.1.1.xxx的形式



> 为了确定子网，分开主机和路由器的每个接口，产生几个隔离的网络岛，使用接口端接这些隔离的网络的端点。这些隔离的网络中的每一个都叫做一个子网(subnet)。

IP地址按点分十进制记法(dotted-decimal notation)书写，每个数字从0-255

IP地址=网络地址(NetID)+主机地址(HostID)（又称：主机号和网络号组成）

网络地址用于描述主机所归属的网络；

主机部分表示主机在网络内的唯一地址。

要计算网络地址，必须借助于子网掩码。

计算过程是，将IP地址和子网掩码都换算成二进制，然后进行与运算，结果就是<strong>网络地址</strong>

> 例如:计算IP地址为:202.99.160.50子网掩码是255.255.255.0的网络地址步骤如下: 
> 1)将IP地址和子网掩码分别换算成二进制 
> 202.99.160.50 换算成二进制为 11001010·01100011·10100000·00110010 
> 255.255.255.0 换算成二进制为 11111111·11111111·11111111·00000000 
> 2)将二者进行与运算 

> [![img](http://www.pcbookcn.com/img_article/2005113194521371.jpg)](http://www.pcbookcn.com/img_article/2005113194521371.jpg)

> 3)将运算结果换算成十进制,这就是网络地址. 
> 11001010·01100011·10100000·00000000换算成十进制就是202.99.160.0 

#### 广播地址

广播地址**(Broadcast Address)是专门用于同时向网络中所有工作站进行发送的一个**地址**。在使用TCP/IP协议的网络中，主机标识段host ID 为全1 的IP 地址为广播地址，广播的分组传送给host ID段所涉及的所有计算机。例如，对于10.1.1.0 （255.255.255.0 ）网段，其广播地址为10.1.1.255 （255 即为2 进制的11111111 ），当发出一个目的地址为10.1.1.255 的分组（封包）时，它将被分发给该网段上的所有计算机。

<span>参考：[百度百科广播地址](https://baike.baidu.com/item/广播地址)</span>



#### 子网掩码

子网掩码是用来判断任意两台计算机的IP地址是否属于同一子网络的根据。最为简单的理解就是两台计算机各自的IP地址与子网掩码进行与运算后，得出的结果是相同的，则说明这两台计算机是处于同一子网络上，可以进行直接的通讯。



#### 网关

大家都知道，从一个房间走到另一个房间，必然要经过一扇门。同样，从一个网络向另一个网络发送信息，也必须经过一道“关口”，这道关口就是网关。顾名思义，网关（Gateway) 就是一个网络连接到另一个网络的“关口”。也就是网络关卡。

举例说明

假设你的名字叫小不点(很小)，你住在一个大院子里，你的邻居有很多小伙伴，父母是你的网关。当你想跟院子里的某个小伙伴玩，只要你在院子里大喊一声他的名字，他听到了就会回应你，并且跑出来跟你玩。

但是你jia zha不允许你走出大门，你想与外界发生的一切联系，都必须由父母（网关）用电话帮助你联系。假如你想找你的同学小明聊天，小明家住在很远的另外一个院子里，他家里也有父母（小明的网关）。但是你不知道小明家的电话号码，不过你的班主任老师有一份你们班全体同学的名单和电话号码对照表，你的老师就是你的DNS服务器。于是你在家里和父母有了下面的对话：

小不点：妈妈(或爸爸),我想找班主任查一下小明的电话号码行吗？家长：好，你等着。（接着你家长给你的班主任挂了一个电话，问清楚了小明的电话）问到了，他家的号码是211.99.99.99

小不点：太好了！妈(或爸),我想找小明，你再帮我联系一下小明吧。

家长：没问题。（接着家长向电话局发出了请求接通小明家电话的请求，最后一关当然是被转接到了小明家家长那里，然后他家长把电话给转到小明）.

就这样你和小明取得了联系。

![big]({{ '/styles/images/gateway.jpg' | prepend: site.baseurl  }})

如果搞清了什么是网关，默认网关也就好理解了。就好像一个房间可以有多扇门一样，一台主机可以有多个网关。默认网关的意思是一台主机如果找不到可用的网关，就把数据包发给默认指定的网关，由这个网关来处理数据包。默认网关。默认网关一般填写192.168.x.1

参考：[百度百科 网关]([https://baike.baidu.com/item/%E7%BD%91%E5%85%B3](https://baike.baidu.com/item/网关))



#### DNS服务器

**DNS**是指：域名服务器(Domain Name Server)。在Internet上域名与IP地址之间是一一对应的，域名虽然便于人们记忆，但机器之间只能互相认识IP地址，它们之间的转换工作称为域名解析，域名解析需要由专门的域名解析服务器来完成，DNS就是进行域名解析的服务器 。

把域名翻译成IP地址的软件称为域名习题哦那个，即DNS。它保存了一张域名(domain name)和与之相对应的IP地址 (IP address)的表，以解析消息的域名。 域名是Internet上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位（有时也指地理位置）。域名是由一串用点分隔的名字组成的，通常包含组织名，而且始终包括两到三个字母的后缀，以指明组织的类型或该域所在的国家或地区。

比方说我现在有一个IP地址，想要我以外的人能够访问，可以直接在浏览器中输入IP地址，但是这个太难记忆了。

那么我可以买一个域名，可以将IP地址和域名绑在一起。在实际访问域名的过程中，实际上还是访问IP地址，那么就需要将域名解析为IP地址，它们之间的转换工作称为域名解析，域名解析需要由专门的域名解析服务器来完成，DNS就是进行域名解析的服务器。

在计算机网络的网络世界里，不同的计算机之间通过指派给它们的IP地址来互相区分。IP地址有两种类型：公有和私有。通常服务器使用公有地址，这是因为它们要被全世界数以百计的计算机访问。至于你那链接在路由器上的个人电脑，它通常获取到的私有IP。

举个例子，平常我们访问www.baidu.com发生了什么？

你在浏览器中输入www.baidu.com，回车后，首先需要把域名转换成对应的IP，要完成这项任务，需要给默认网关(大多数情况下就是路由器)发送一条DNS请求。路由都会配置一个DNS服务器地址，这个地址便是DNS请求的目的地。

DNS服务器用来将域名转换成IP地址。当DNS服务器收到一条请求后，它会检查它有没有该请求需要的转换信息。如果没有这条转换信息，那么DNS服务器会把这条请求转发给其他的DNS服务器。通过这种方式，就完成了从域名到IP地址的转换。转换结果随后会发回到发出请求的计算机。

综上所述，只有给出子网地址和子网掩码或网络前缀，才能准确描述一个子网的规模。

##### 综上所述

假如某子网内的一个地址为192.168.1.45，子网掩码为255.255.255.128，那么通过将该地址与子网掩码做按位与运算，就可以得到该子网的子网地址为192.168.1.0，或者说该子网为192.168.1.0/25。如果利用子网掩码的反码与该地址做按位或运算，就可以得到该子网的直接广播地址，即192.168.1.127。

参考

《计算机网络自顶向下第六版》

《计算机网络原理04741》自考教材